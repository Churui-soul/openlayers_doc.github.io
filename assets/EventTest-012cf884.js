import{O as v,V as h,f as m}from"./InitMap-49165eff.js";import{_ as $,M as f,p as n,q as i,N as k,Q as t,R as d,O as g,P as u,w as L,v as _}from"./framework-e921cdd2.js";const C={components:{OlMap:v},data(){return{_map:null,logs:[],helperList:[{label:"绑定渲染事件",activeLabel:"解绑渲染事件",defaultLabel:"绑定渲染事件",onName:"onRender",unName:"unRender"},{label:"绑定移动事件",activeLabel:"解绑移动事件",defaultLabel:"绑定移动事件",onName:"onMoveend",unName:"unMoveend"},{label:"绑定鼠标事件",activeLabel:"解绑鼠标事件",defaultLabel:"绑定鼠标事件",onName:"onPointer",unName:"unPointer"},{label:"更改Size",activeLabel:"还原Size",defaultLabel:"更改Size",onName:"changeSize",unName:"unchangeSize"},{label:"更改Target",activeLabel:"还原Target",defaultLabel:"更改Target",onName:"changeTarget",unName:"unchangeTarget"},{label:"更改View",activeLabel:"还原View",defaultLabel:"更改View",onName:"changeView",unName:"unchangeView"}],renderCallback:[()=>{this.log("地图准备渲染")},()=>{this.log("地图正在渲染")},()=>{this.log("地图完成渲染"),this.log("----------------------")}],moveendCallback:[],pointerCallback:[()=>this.log("鼠标移动"),()=>this.log("鼠标拖拽")]}},mounted(){this.$data._map=this.$refs.map.getMap();let e=this.$data._map;e.on("change:size",()=>{this.log("size改变")}),e.on("change:view",()=>{this.log("view改变")}),e.on("change:target",()=>{this.log("target改变")}),e.on("propertychange",()=>{this.log("property改变")})},methods:{log(e){this.logs.push(e),this.$nextTick(()=>{this.$refs.mapLog.scrollTo(0,this.$refs.mapLog.scrollHeight)}),console.log(e)},onRender(){this.$data._map.on("precompose",this.renderCallback[0]),this.$data._map.on("postcompose",this.renderCallback[1]),this.$data._map.on("postrender",this.renderCallback[2])},unRender(){this.$data._map.un("precompose",this.renderCallback[0]),this.$data._map.un("postcompose",this.renderCallback[1]),this.$data._map.un("postrender",this.renderCallback[2])},onMoveend(){this.moveendCallback[0]=()=>{let e=this.$data._map,a=e.getView().calculateExtent(e.getSize()),r=a[0],c=a[1],l=a[2],o=a[3];this.log("左下角X: "+r),this.log("左下角Y: "+c),this.log("右上角X: "+l),this.log("右上角Y: "+o),this.log("---------------")},this.$data._map.on("moveend",this.moveendCallback[0])},unMoveend(){this.$data._map.un("moveend",this.moveendCallback[0])},onPointer(){this.$data._map.on("pointermove",this.pointerCallback[0]),this.$data._map.on("pointerdrag",this.pointerCallback[1])},unPointer(){this.$data._map.un("pointermove",this.pointerCallback[0]),this.$data._map.un("pointerdrag",this.pointerCallback[1])},changeSize(){this.$refs.map.$el.style.width="250px",this.$data._map.updateSize()},unchangeSize(){this.$refs.map.$el.style.width="100%",this.$data._map.updateSize()},changeTarget(){this.$data._map.setTarget(this.$refs.mapMiniContainer)},unchangeTarget(){this.$data._map.setTarget(this.$refs.map.$el)},changeView(){let e=new h({projection:"EPSG:3857",center:m([116.406568,39.914714]),zoom:5});this.$data._map.setView(e)},unchangeView(){let e=new h({projection:"EPSG:3857",center:m([126.59073,43.86189]),zoom:8});this.$data._map.setView(e)},btnClick(e){let a=this.helperList[e];if(a.activeLabel===void 0)return this[a.onName]();a.label===a.activeLabel?(a.label=a.defaultLabel,this[a.unName]()):(a.label=a.activeLabel,this[a.onName]())},getEventTypeDict(){return{click:"click",dblclick:"dblclick",singleclick:"singleclick",moveend:"moveend",pointermove:"pointermove",pointerdrag:"pointerdrag",precompose:"precompose",postcompose:"postcompose",postrender:"postrender",changeLayerGroup:"change:layerGroup",changeSize:"change:size",changeTarget:"change:target",changeView:"change:view",propertychange:"propertychange"}}}},w={class:"map-container"},N={ref:"mapMiniContainer",class:"map-container-mini"},z={class:"map-helper"},T=["onClick"],V={class:"map-cmd"},y=t("div",{class:"map-cmd-title"},null,-1),S={ref:"mapLog"};function x(e,a,r,c,l,o){const b=f("ol-map");return n(),i("div",w,[k(b,{ref:"map"},null,512),t("div",N,null,512),d(" 事件测试 "),t("ul",z,[(n(!0),i(g,null,u(l.helperList,(s,p)=>(n(),i("li",{key:p,class:L(["map-helper-item"])},[t("button",{class:"map-helper-item-btn",onClick:M=>o.btnClick(p)},_(s.label),9,T)]))),128))]),d(" 控制台 "),t("div",V,[y,t("ul",S,[(n(!0),i(g,null,u(l.logs,s=>(n(),i("li",null,_(s),1))),256))],512)])])}const R=$(C,[["render",x],["__file","EventTest.vue"]]);export{R as default};
