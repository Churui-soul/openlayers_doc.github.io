import{O as ne,P as ie}from"./InitMap-547857b1.js";import{F as oe,V as le,a as se,S as fe,I as de}from"./Vector-b5c0ef0a.js";import{_ as he,M as ce,p as ve,U as xe}from"./framework-e921cdd2.js";function j(T){throw new Error('Could not dynamically require "'+T+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}(function T(R,I,G){function D(e,t){if(!I[e]){if(!R[e]){var s=typeof j=="function"&&j;if(!t&&s)return s(e,!0);if(C)return C(e,!0);var y=new Error("Cannot find module '"+e+"'");throw y.code="MODULE_NOT_FOUND",y}var r=I[e]={exports:{}};R[e][0].call(r.exports,function(a){var i=R[e][1][a];return D(i||a)},r,r.exports,T,R,I,G)}return I[e].exports}for(var C=typeof j=="function"&&j,x=0;x<G.length;x++)D(G[x]);return D})({1:[function(T,R,I){function G(e,t,s,a){var r=0,a=a===void 0?{}:a,i=a.loop===void 0?null:a.loop,o=a.palette===void 0?null:a.palette;if(t<=0||s<=0||t>65535||s>65535)throw"Width/Height invalid.";function n(c){var _=c.length;if(_<2||_>256||_&_-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return _}e[r++]=71,e[r++]=73,e[r++]=70,e[r++]=56,e[r++]=57,e[r++]=97;var l=0,f=0;if(o!==null){for(var p=n(o);p>>=1;)++l;if(p=1<<l,--l,a.background!==void 0){if(f=a.background,f>=p)throw"Background index out of range.";if(f===0)throw"Background index explicitly passed as 0."}}if(e[r++]=t&255,e[r++]=t>>8&255,e[r++]=s&255,e[r++]=s>>8&255,e[r++]=(o!==null?128:0)|l,e[r++]=f,e[r++]=0,o!==null)for(var u=0,k=o.length;u<k;++u){var w=o[u];e[r++]=w>>16&255,e[r++]=w>>8&255,e[r++]=w&255}if(i!==null){if(i<0||i>65535)throw"Loop count invalid.";e[r++]=33,e[r++]=255,e[r++]=11,e[r++]=78,e[r++]=69,e[r++]=84,e[r++]=83,e[r++]=67,e[r++]=65,e[r++]=80,e[r++]=69,e[r++]=50,e[r++]=46,e[r++]=48,e[r++]=3,e[r++]=1,e[r++]=i&255,e[r++]=i>>8&255,e[r++]=0}var h=!1;this.addFrame=function(c,_,F,m,q,v){if(h===!0&&(--r,h=!1),v=v===void 0?{}:v,c<0||_<0||c>65535||_>65535)throw"x/y invalid.";if(F<=0||m<=0||F>65535||m>65535)throw"Width/Height invalid.";if(q.length<F*m)throw"Not enough pixels for the frame size.";var W=!0,B=v.palette;if(B==null&&(W=!1,B=o),B==null)throw"Must supply either a local or global palette.";for(var Q=n(B),E=0;Q>>=1;)++E;Q=1<<E;var J=v.delay===void 0?0:v.delay,L=v.disposal===void 0?0:v.disposal;if(L<0||L>3)throw"Disposal out of range.";var K=!1,S=0;if(v.transparent!==void 0&&v.transparent!==null&&(K=!0,S=v.transparent,S<0||S>=Q))throw"Transparent color index.";if((L!==0||K||J!==0)&&(e[r++]=33,e[r++]=249,e[r++]=4,e[r++]=L<<2|(K===!0?1:0),e[r++]=J&255,e[r++]=J>>8&255,e[r++]=S,e[r++]=0),e[r++]=44,e[r++]=c&255,e[r++]=c>>8&255,e[r++]=_&255,e[r++]=_>>8&255,e[r++]=F&255,e[r++]=F>>8&255,e[r++]=m&255,e[r++]=m>>8&255,e[r++]=W===!0?128|E-1:0,W===!0)for(var A=0,d=B.length;A<d;++A){var U=B[A];e[r++]=U>>16&255,e[r++]=U>>8&255,e[r++]=U&255}r=D(e,r,E<2?2:E,q)},this.end=function(){return h===!1&&(e[r++]=59,h=!0),r}}function D(e,t,s,y){e[t++]=s;var r=t++,a=1<<s,i=a-1,o=a+1,n=o+1,l=s+1,f=0,p=0;function u(v){for(;f>=v;)e[t++]=p&255,p>>=8,f-=8,t===r+256&&(e[r]=255,r=t++)}function k(v){p|=v<<f,f+=l,u(8)}var w=y[0]&i,h={};k(a);for(var c=1,_=y.length;c<_;++c){var F=y[c]&i,m=w<<8|F,q=h[m];if(q===void 0){for(p|=w<<f,f+=l;f>=8;)e[t++]=p&255,p>>=8,f-=8,t===r+256&&(e[r]=255,r=t++);n===4096?(k(a),n=o+1,l=s+1,h={}):(n>=1<<l&&++l,h[m]=n++),w=F}else w=q}return k(w),k(o),u(1),r+1===t?e[r]=0:(e[r]=t-r-1,e[t++]=0),t}function C(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!==56||e[t++]!==97)throw"Invalid GIF 87a/89a header.";var s=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,r=e[t++],a=r>>7,i=r&7,o=1<<i+1;e[t++],e[t++];var n=null;a&&(n=t,t+=o*3);var l=!0,f=[],p=0,u=null,k=0,w=null;for(this.width=s,this.height=y;l&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,w=e[t++]|e[t++]<<8,t++;else for(t+=12;;){var h=e[t++];if(h===0)break;t+=h}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw"Invalid graphics extension block.";var c=e[t++];p=e[t++]|e[t++]<<8,u=e[t++],c&1||(u=null),k=c>>2&7,t++;break;case 254:for(;;){var h=e[t++];if(h===0)break;t+=h}break;default:throw"Unknown graphic control label: 0x"+e[t-1].toString(16)}break;case 44:var _=e[t++]|e[t++]<<8,F=e[t++]|e[t++]<<8,m=e[t++]|e[t++]<<8,q=e[t++]|e[t++]<<8,v=e[t++],W=v>>7,B=v>>6&1,Q=v&7,E=1<<Q+1,J=n,L=!1;if(W){var L=!0;J=t,t+=E*3}var K=t;for(t++;;){var h=e[t++];if(h===0)break;t+=h}f.push({x:_,y:F,width:m,height:q,has_local_palette:L,palette_offset:J,data_offset:K,data_length:t-K,transparent_index:u,interlaced:!!B,delay:p,disposal:k});break;case 59:l=!1;break;default:throw"Unknown gif block: 0x"+e[t-1].toString(16)}this.numFrames=function(){return f.length},this.loopCount=function(){return w},this.frameInfo=function(S){if(S<0||S>=f.length)throw"Frame index out of range.";return f[S]},this.decodeAndBlitFrameBGRA=function(S,A){var d=this.frameInfo(S),U=d.width*d.height,$=new Uint8Array(U);x(e,d.data_offset,$,U);var P=d.palette_offset,M=d.transparent_index;M===null&&(M=256);var N=d.width,V=s-N,z=N,Y=(d.y*s+d.x)*4,b=((d.y+d.height)*s+d.x)*4,g=Y,H=V*4;d.interlaced===!0&&(H+=s*4*7);for(var X=8,Z=0,ee=$.length;Z<ee;++Z){var O=$[Z];if(z===0&&(g+=H,z=N,g>=b&&(H=V*4+s*4*(X-1),g=Y+(N+V)*(X<<1),X>>=1)),O===M)g+=4;else{var re=e[P+O*3],te=e[P+O*3+1],ae=e[P+O*3+2];A[g++]=ae,A[g++]=te,A[g++]=re,A[g++]=255}--z}},this.decodeAndBlitFrameRGBA=function(S,A){var d=this.frameInfo(S),U=d.width*d.height,$=new Uint8Array(U);x(e,d.data_offset,$,U);var P=d.palette_offset,M=d.transparent_index;M===null&&(M=256);var N=d.width,V=s-N,z=N,Y=(d.y*s+d.x)*4,b=((d.y+d.height)*s+d.x)*4,g=Y,H=V*4;d.interlaced===!0&&(H+=s*4*7);for(var X=8,Z=0,ee=$.length;Z<ee;++Z){var O=$[Z];if(z===0&&(g+=H,z=N,g>=b&&(H=V*4+s*4*(X-1),g=Y+(N+V)*(X<<1),X>>=1)),O===M)g+=4;else{var re=e[P+O*3],te=e[P+O*3+1],ae=e[P+O*3+2];A[g++]=re,A[g++]=te,A[g++]=ae,A[g++]=255}--z}}}function x(e,t,s,y){for(var r=e[t++],a=1<<r,i=a+1,o=i+1,n=r+1,l=(1<<n)-1,f=0,p=0,u=0,k=e[t++],w=new Int32Array(4096),h=null;;){for(;f<16&&k!==0;)p|=e[t++]<<f,f+=8,k===1?k=e[t++]:--k;if(f<n)break;var c=p&l;if(p>>=n,f-=n,c===a){o=i+1,n=r+1,l=(1<<n)-1,h=null;continue}else if(c===i)break;for(var _=c<o?c:h,F=0,m=_;m>a;)m=w[m]>>8,++F;var q=m,v=u+F+(_!==c?1:0);if(v>y){console.log("Warning, gif stream longer than expected.");return}s[u++]=q,u+=F;var W=u;for(_!==c&&(s[u++]=q),m=_;F--;)m=w[m],s[--W]=m&255,m>>=8;h!==null&&o<4096&&(w[o++]=h<<8|q,o>=l+1&&n<12&&(++n,l=l<<1|1)),h=c}return u!==y&&console.log("Warning, gif stream shorter than expected."),s}try{I.GifWriter=G,I.GifReader=C}catch{}},{}],2:[function(T,R,I){var G,D,C,x,e,t,s,y=function(r,a){return function(){return r.apply(a,arguments)}};D=T("omggif").GifReader,t=function(r){var a;return a=new XMLHttpRequest,a.open("GET",r,!0),a.responseType="arraybuffer",{xhr:a,get:function(i){return a.onload=s(i),a.send(),this},animate:function(i){var o;return o=e(i),a.onload=s(function(n){return n.animateInCanvas(o)}),a.send(),this},frames:function(i,o,n){var l;return n==null&&(n=!1),l=e(i),a.onload=s(function(f){return f.onDrawFrame=o,f.animateInCanvas(l,n)}),a.send(),this}}},s=function(r){return function(a){return r(new G(new D(new Uint8Array(this.response))))}},e=function(r){var a,i;if(typeof r=="string"&&((i=a=document.querySelector(r))!=null?i.tagName:void 0)==="CANVAS")return a;if((r!=null?r.tagName:void 0)==="CANVAS")return r;throw new Error("Unexpected selector type. Valid types are query-selector-string/canvas-element")},C=function(r,a,i){var o,n,l;return o=document.createElement("canvas"),n=o.getContext("2d"),o.width=r.width,o.height=r.height,l=n.createImageData(a,i),l.data.set(r.pixels),n.putImageData(l,-r.x,-r.y),o},x=function(r,a){var i;return function(){i=[];for(var o=0,n=r.numFrames();0<=n?o<n:o>n;0<=n?o++:o--)i.push(o);return i}.apply(this).map(function(o){return function(n){var l;return l=r.frameInfo(n),l.pixels=new Uint8ClampedArray(r.width*r.height*4),r.decodeAndBlitFrameRGBA(n,l.pixels),l}}())},G=function(){function r(a){var i;this._reader=a,this._advanceFrame=y(this._advanceFrame,this),this._nextFrameRender=y(this._nextFrameRender,this),this._nextFrame=y(this._nextFrame,this),i=this._reader,this.width=i.width,this.height=i.height,this._frames=x(this._reader),this._loopCount=this._reader.loopCount(),this._loops=0,this._frameIndex=0,this._running=!1}return r.prototype.start=function(){return this._lastTime=new Date().valueOf(),this._delayCompensation=0,this._running=!0,setTimeout(this._nextFrame,0),this},r.prototype.stop=function(){return this._running=!1,this},r.prototype.reset=function(){return this._frameIndex=0,this._loops=0,this},r.prototype._nextFrame=function(){requestAnimationFrame(this._nextFrameRender)},r.prototype._nextFrameRender=function(){var a,i;if(this._running)return a=this._frames[this._frameIndex],(i=this.onFrame)!=null&&i.apply(this,[a,this._frameIndex]),this._enqueueNextFrame()},r.prototype._advanceFrame=function(){this._frameIndex+=1,this._frameIndex>=this._frames.length&&(this._loopCount!==0&&this._loopCount===this._loops?this.stop():(this._frameIndex=0,this._loops+=1))},r.prototype._enqueueNextFrame=function(){var a,i,o,n;for(this._advanceFrame();this._running;)if(o=this._frames[this._frameIndex],i=new Date().valueOf()-this._lastTime,this._lastTime+=i,this._delayCompensation+=i,n=o.delay*10,a=n-this._delayCompensation,this._delayCompensation-=n,a<0){this._advanceFrame();continue}else{setTimeout(this._nextFrame,a);break}},r.prototype.animateInCanvas=function(a,i){var o;return i==null&&(i=!0),i&&(a.width=this.width,a.height=this.height),o=a.getContext("2d"),this.onDrawFrame==null&&(this.onDrawFrame=function(n,l,f){return n.drawImage(l.buffer,l.x,l.y)}),this.onFrame==null&&(this.onFrame=function(n){return function(l,f){var p,u;switch(l.buffer==null&&(l.buffer=C(l,n.width,n.height)),typeof n.disposeFrame=="function"&&n.disposeFrame(),l.disposal){case 2:n.disposeFrame=function(){return o.clearRect(0,0,a.width,a.height)};break;case 3:u=o.getImageData(0,0,a.width,a.height),n.disposeFrame=function(){return o.putImageData(u,0,0)};break;default:n.disposeFrame=null}return(p=n.onDrawFrame)!=null?p.apply(n,[o,l,f]):void 0}}(this)),this.start(),this},r}(),t.Animator=G,t.decodeFrames=x,t.createBufferCanvas=C,typeof window<"u"&&window!==null&&(window.gifler=t),typeof R<"u"&&R!==null&&(R.exports=t)},{omggif:1}]},{},[2]);const pe={components:{OlMap:ne},data(){return{_map:null}},mounted(){this.$data._map=this.$refs.map.getMap(),this.addPointGif([14203335093542054e-9,5428667749246727e-9],"gif/dog_dance.gif"),this.addPointGif([14143335093542054e-9,5480667749246727e-9],"gif/dog_cheer.gif"),this.addPointGif([14263335093542054e-9,5480667749246727e-9],"gif/dog_cheer.gif")},methods:{addPointGif(T,R){const I=new oe({geometry:new ie(T)}),G=new le({features:[I]}),D=new se({source:G});window.gifler(R).frames(document.createElement("canvas"),(C,x)=>{I.getStyle()||I.setStyle(new fe({image:new de({img:C.canvas,imgSize:[x.width,x.height],opacity:.8})})),C.clearRect(0,0,x.width,x.height),C.drawImage(x.buffer,x.x,x.y),this.$data._map.render()},!0),this.$data._map.addLayer(D)}}};function ue(T,R,I,G,D,C){const x=ce("ol-map");return ve(),xe(x,{ref:"map"},null,512)}const we=he(pe,[["render",ue],["__file","animation_gif.vue"]]);export{we as default};
