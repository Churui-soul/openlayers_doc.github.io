import{T as p,c as w,e as _,a as x,O as S,P as y,f as b,u as L,b as d}from"./InitMap-547857b1.js";import{V as O,a as F,F as z,S as m,I as T,C as $,b as C}from"./Vector-b5c0ef0a.js";import{g as R}from"./render-ac84978c.js";import{_ as X,M as Z,p as j,U as v}from"./framework-e921cdd2.js";class G extends p{constructor(e){e=e||{};const r=e.projection!==void 0?e.projection:"EPSG:3857",a=e.tileGrid!==void 0?e.tileGrid:w({extent:_(r),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:r,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:a,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const M=G,k='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class P extends M{constructor(e){e=e||{};let r;e.attributions!==void 0?r=e.attributions:r=[k];const a=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",n=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:r,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:a,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:n,wrapX:e.wrapX,zDirection:e.zDirection})}}const q=P,f=new x({source:new q({wrapX:!1})}),s=new O({wrapX:!1}),D=new F({source:s}),E={components:{OlMap:S},data(){return{_map:null,duration:3e3}},mounted(){this.$data._map=this.$refs.map.getMap(),this.$data._map.addLayer(f),this.$data._map.addLayer(D),s.on("addfeature",t=>{this.flash(t.feature)});for(let t=0;t<100;t++)setTimeout(()=>{this.addRandomFeature()},t*1e3)},methods:{generateRandomCoordinate(){var t=125.064,e=125.695,r=43.359,a=43.995,n=Math.random()*(e-t)+t,o=Math.random()*(a-r)+r;return[n,o]},addRandomFeature(){const t=new y(b(this.generateRandomCoordinate())),e=new z(t);let r=new m({image:new T({src:"duck.png"})});e.setStyle(r),s.addFeature(e)},flash(t){const e=Date.now(),r=t.getGeometry().clone(),a=f.on("postrender",n=>{const i=n.frameState.time-e;if(i>=this.duration){L(a);return}const c=R(n),l=i/this.duration,h=d(l)*45+5,u=d(1-l),g=new m({image:new $({radius:h,stroke:new C({color:"rgba(255, 0, 0, "+u+")",width:1.25+u})})});c.setStyle(g),c.drawGeometry(r),this.$data._map.render()})}}};function I(t,e,r,a,n,o){const i=Z("ol-map");return j(),v(i,{ref:"map"},null,512)}const K=X(E,[["render",I],["__file","animation_point.vue"]]);export{K as default};
